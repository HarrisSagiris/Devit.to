<!DOCTYPE html>
<html>
<head>
  <title>Reviewit-your feed</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<style>
body {
    background-color: #1a1a1b;
    color: #d7dadc;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

header {
    background-color: #333;
    padding: 10px;
    text-align: center;
}

header p, header a {
    color: #d7dadc;
    text-decoration: none;
    margin: 0 5px;
}

header a:hover {
    color: #ff4500;
}

h2 {
    color: #ff4500;
    text-align: center;
    margin-top: 20px;
}

#new-post-form {
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #252526;
    padding: 20px;
    border-radius: 8px;
    margin: 20px auto;
    width: 80%;
}

#new-post-form input, #new-post-form textarea, #new-post-form select, #new-post-form button {
    width: 100%;
    margin: 8px 0;
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #444;
    background-color: #1a1a1b;
    color: #d7dadc;
}

#new-post-form button {
    background-color: #ff4500;
    color: white;
    cursor: pointer;
}

#new-post-form button:hover {
    background-color: #d4361a;
}

.post {
    background-color: #252526;
    margin: 10px auto;
    padding: 20px;
    border-radius: 8px;
    width: 80%;
    color: #d7dadc;
    position: relative;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.post h3 {
    color: #ff4500;
    font-size: 1.2em;
    margin-bottom: 10px;
}

.post p {
    margin: 10px 0;
}

.upvote, .downvote {
    background-color: #333;
    color: #ff4500;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    margin: 5px 5px 5px 0;
    cursor: pointer;
}

.upvote:hover, .downvote:hover {
    background-color: #ff4500;
    color: #fff;
}

.comment-form {
    display: flex;
    align-items: center;
    margin-top: 10px;
}

.comment-form input {
    width: 70%;
    margin-right: 10px;
    padding: 8px;
    background-color: #1a1a1b;
    border: 1px solid #444;
    color: #d7dadc;
}

.comment-form button {
    background-color: #333;
    color: #ff4500;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
}

.comment-form button:hover {
    background-color: #ff4500;
    color: #fff;
}

.comments {
    margin-top: 15px;
}

.comment {
    background-color: #333;
    padding: 10px;
    border-radius: 5px;
    margin-top: 5px;
    color: #d7dadc;
}

.comment strong {
    color: #ff4500;
}


</style>
<body>
  <h2>Welcome to Reviewit: The Number 1 reviewing platform worldwide.</h2>
  <header>
    <% if (user) { %>
      <p>Welcome, <%= user.username %> | <a href="/logout">Logout</a> | <a href="/my-posts">My Posts</a></p>
      <form action="/post" method="post">
        <input type="text" name="title" placeholder="Title" required><br>
        <select name="category">
          <option value="Movies">Movies</option>
          <option value="Books">Books</option>
          <option value="Games">Games</option>
          <option value="General post">General post</option>
          <option value="Songs">Songs</option>
          <option value="Programming">Programming</option>
          
        </select><br>
        <textarea name="content" placeholder="Your review" required></textarea><br>
        <button type="submit">Post</button>
      </form>
    <% } else { %>
      <a href="/login">Login</a> | <a href="/register">Register</a> 
    <% } %>
  </header>
  <section>
    <h2>Feed</h2>
    <% posts.forEach(post => { %>
      <div id="post-<%= post._id %>">
        <h3><%= post.title %> - <%= post.category %></h3>
        <p><strong>by <%= post.username %></strong></p>
        <p><%= post.content %></p>
        <p>Upvotes: <%= post.upvotes %> | Downvotes: <%= post.downvotes %></p>
        <% if (user) { %>
          <button class="upvote" data-id="<%= post._id %>">Upvote</button>
          <button class="downvote" data-id="<%= post._id %>">Downvote</button>
          <form class="comment-form" data-id="<%= post._id %>">
            <input type="text" name="content" placeholder="Add a comment" required>
            <button type="submit">Comment</button>
          </form>
        <% } %>
        <h4>Comments:</h4>
        <% post.comments.forEach(comment => { %>
          <div class="comment"><strong><%= comment.username %>:</strong> <%= comment.content %></div>
        <% }) %>
      </div>
      <hr>
    <% }) %>
  </section>
  <script src="/js/script.js"></script>
</body>
</html>